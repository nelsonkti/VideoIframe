webpackJsonp([1],{"4ml/":function(e,t){},AEiw:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("title",[this._v("爱视频")]),this._v(" "),t("router-view")],1)},staticRenderFns:[]};var s=n("VU/8")({name:"App"},i,!1,function(e){n("AEiw")},null,null).exports,r=n("p7sN"),o=n("Xxa5"),c=n.n(o),l=n("exGp"),u=n.n(l),d={name:"Home",data:function(){return{newVideoList:[],list:[],loading:!1,finished:!1}},created:function(){this.getVideoList()},methods:{getVideoList:function(){var e=this;return u()(c.a.mark(function t(){var n,a,i;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,t.prev=1,a={per_page:1e4,page:1},t.next=5,e.$api.Video.getVideoList(a);case 5:i=t.sent,n.newVideoList=i.data,console.log("返回数据data",i.data),console.log("返回数据",i),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log("​catch -> e",t.t0);case 14:case"end":return t.stop()}},t,e,[[1,11]])}))()}}},p={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("van-grid",{attrs:{border:!1,"icon-size:49":"","column-num":3}},e._l(e.newVideoList,function(t){return n("van-grid-item",{key:t.id,attrs:{to:"/video/detail/"+t.id,info:"电视剧"}},[n("van-image",{attrs:{Lazyload:"",src:t.img_url}}),e._v(" "),n("span",{staticClass:"video-title"},[e._v(e._s(t.title))])],1)}),1)],1)},staticRenderFns:[]};var v=n("VU/8")(d,p,!1,function(e){n("RfTA")},"data-v-31ed43c9",null).exports,f={name:"VideoDetail",data:function(){return{selectVideoIndex:0,videoInfo:[],videoSeriesList:[],parsing_url:"",url:"",play_url:null,showIframe:!1,isList:!0,lineData:[]}},created:function(){this.getVideoInfo(),this.getAnalysisLine(),this.getSeriesList()},methods:{routerback:function(){this.$router.push({path:"/"})},onSwitch:function(e,t){this.play_url=this.parsing_url+e,this.url=e,this.selectVideoIndex=t},onSwitchLine:function(){this.play_url=this.parsing_url+this.url},getVideoInfo:function(){var e=this;return u()(c.a.mark(function t(){var n,a,i,s;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,a=e.$route.params.id,t.prev=2,i={id:a},t.next=6,e.$api.Video.getVideoInfo(i);case 6:s=t.sent,n.videoInfo=s.data,s&&(e.showIframe=!0),console.log("返回详情数据data",s.data),console.log("返回数据",s),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),console.log("​catch -> e",t.t0);case 16:case"end":return t.stop()}},t,e,[[2,13]])}))()},getSeriesList:function(){var e=this;return u()(c.a.mark(function t(){var n,a,i,s;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,a=e.$route.params.id,t.prev=2,i={per_page:1e4,page:1,id:a},t.next=6,e.$api.Video.getSeriesList(i);case 6:s=t.sent,console.log("长度："+s.data.length),1===s.data.length&&(e.isList=!1),n.videoSeriesList=s.data,console.log("返回数据data",s.data),s.data&&(e.url=s.data[0].url),console.log("返回数据data",s.data[0].url),console.log("返回数据",s),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(2),console.log("​catch -> e",t.t0);case 19:case"end":return t.stop()}},t,e,[[2,16]])}))()},getAnalysisLine:function(){var e=this;return u()(c.a.mark(function t(){var n,a,i,s,r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,a=e.$route.params.id,t.prev=2,i={per_page:1e4,page:1,id:a},t.next=6,e.$api.Video.getAnalysisLineList(i);case 6:s=t.sent,r=[],s.data.forEach(function(e,t){var n=[];n.text=e.name,n.value=e.url,console.log(n),r.push(n)}),n.lineData=r,s.data&&(e.parsing_url=s.data[0].url),console.log("返回数据",s),console.log("返回数据",s),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(2),console.log("​catch -> e",t.t0);case 18:case"end":return t.stop()}},t,e,[[2,15]])}))()}}},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"video-detail"},[n("van-icon",{attrs:{name:"arrow-left"},on:{click:e.routerback}}),e._v(" "),n("div",{staticClass:"iframeContain"},[n("iframe",{directives:[{name:"show",rawName:"v-show",value:e.showIframe,expression:"showIframe"}],class:{iframeContain:e.showIframe},attrs:{name:"iframeContain",seamless:"",scrolling:"yes",src:e.play_url}})]),e._v(" "),n("div",{staticClass:"header"},[n("h2",[e._v(e._s(e.videoInfo.title))]),e._v(" "),n("span",[e._v(e._s(e.videoInfo.desc))])]),e._v(" "),n("van-divider"),e._v(" "),n("van-dropdown-menu",[n("van-dropdown-item",{attrs:{options:e.lineData,click:e.onSwitchLine()},model:{value:e.parsing_url,callback:function(t){e.parsing_url=t},expression:"parsing_url"}})],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isList,expression:"isList"}],staticClass:"series-content"},[n("p",[e._v("剧集")]),e._v(" "),n("div",{staticClass:"series-list"},e._l(e.videoSeriesList,function(t,a){return n("div",{key:a},[n("van-button",{staticClass:"series-num",class:e.selectVideoIndex===a?"c-glyphicon-albumPlay":"",on:{click:function(n){return e.onSwitch(t.url,a)}}},[e._v(e._s(t.series_id))])],1)}),0)])],1)},staticRenderFns:[]};var h=n("VU/8")(f,g,!1,function(e){n("us2X")},"data-v-0ad24b22",null).exports;a.a.use(r.a);var m=new r.a({routes:[{path:"/",name:"Home",component:v},{path:"/video/detail/:id",name:"VideoDetail",component:h}]}),_=n("Fd2+"),w=(n("4ml/"),n("HSQo")),L=n.n(w),V=n("//Fk"),x=n.n(V),y=n("mvHQ"),k=n.n(y),I=n("mtWM"),b=n.n(I).a.create({timeout:6e4});b.defaults.headers.post["Content-Type"]="application/json",b.defaults.headers.put["Content-Type"]="application/json",b.interceptors.request.use(function(e){return"post"!==e.method&&"put"!==e.method||(e.data=k()(e.data)),e},function(e){return x.a.reject(e)}),b.interceptors.response.use(function(e){return e.data},function(e){var t={};console.log(t);var n=e.response,a=n.status,i=n.statusText,s=n.data;t=e.response?{code:a,data:s,msg:i}:{code:5e3,msg:"Network Error"}});var S=b,A=function(e,t,n){var a={};return t&&(a.params=t),n&&(a.headers=n),S.get(e,a)},C="http://127.0.0.1:8081/api";console.log("NODE_ENV:production");C="http://admin.zsgtdc.cn/api";var $={getVideoList:C+"/video/list",getSeriesList:C,getAnalysisLineList:C+"/video/analysis/lines/list",getVideoInfo:C+"/video/info"},E={},N={Video:{getVideoList:function(e){return console.log("url:"+$.getVideoList),A($.getVideoList,e,E)},getSeriesList:function(e){var t=$.getSeriesList+"/video/"+e.id+"/series/list";return A(t,e,E)},getAnalysisLineList:function(e){return A($.getAnalysisLineList,e,E)},getVideoInfo:function(e){return A($.getVideoInfo,e,E)}}},D={install:function e(t){e.installed||(e.installed=!0,L()(t.prototype,{$api:{get:function(){return N}}}))}};a.a.use(D),a.a.use(r.a),a.a.use(_.b),a.a.use(_.a),a.a.config.productionTip=!1,new a.a({el:"#app",router:m,components:{App:s},template:"<App/>"})},RfTA:function(e,t){},us2X:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.1dc219f7a1bab0a89972.js.map